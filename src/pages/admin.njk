---
layout: layouts/base.njk
title: Instructor Dashboard
description: Review and manage student submissions
permalink: /admin/
---

{% import "macros/badge.njk" as badge %}

<div class="max-w-container-xl mx-auto px-6 py-12">
  <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
    <div>
      <h1 class="text-h1">Instructor Dashboard</h1>
      <p class="text-neutral-500">Review and manage student submissions</p>
    </div>
    <div class="flex items-center gap-4">
      <span class="text-sm text-neutral-400">Logged in as: instructor@njit.edu</span>
      <button class="btn btn-secondary text-sm !px-4 !py-2">Logout</button>
    </div>
  </div>

  {# Tabs #}
  <div class="flex gap-2 mb-8 border-b-2 border-black overflow-x-auto">
    {% set tabs = [
      { key: 'pending', label: 'Pending Review', count: submissions | filterByStatus('pending') | length },
      { key: 'approved', label: 'Approved', count: submissions | filterByStatus('approved') | length },
      { key: 'rejected', label: 'Rejected', count: submissions | filterByStatus('rejected') | length }
    ] %}
    {% for tab in tabs %}
    <button
      class="px-6 py-3 text-sm font-medium border-b-2 -mb-0.5 transition-colors tab-button whitespace-nowrap
        {% if loop.first %}border-black bg-black text-white{% else %}border-transparent hover:bg-neutral-100{% endif %}"
      data-tab="{{ tab.key }}"
    >
      {{ tab.label }} ({{ tab.count }})
    </button>
    {% endfor %}
  </div>

  {# Pending Submissions Table #}
  {% for tabKey in ['pending', 'approved', 'rejected'] %}
  <div class="tab-content {% if not loop.first %}hidden{% endif %}" data-tab-content="{{ tabKey }}">
    {% set tabSubmissions = submissions | filterByStatus(tabKey) %}

    {% if tabSubmissions | length > 0 %}
    <div class="border-2 border-black overflow-x-auto">
      <table class="w-full min-w-[600px]">
        <thead class="bg-neutral-100 border-b-2 border-black">
          <tr>
            <th class="text-left p-4 text-sm font-medium">Submitter</th>
            <th class="text-left p-4 text-sm font-medium">Style</th>
            <th class="text-left p-4 text-sm font-medium">Date</th>
            <th class="text-left p-4 text-sm font-medium">Status</th>
            <th class="text-left p-4 text-sm font-medium">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for submission in tabSubmissions %}
          <tr class="border-b border-neutral-200 last:border-b-0">
            <td class="p-4">
              <p class="font-medium">{{ submission.name }}</p>
              <p class="text-sm text-neutral-400">{{ submission.email }}</p>
            </td>
            <td class="p-4">{{ submission.style }}</td>
            <td class="p-4 text-sm text-neutral-500">{{ submission.submittedDate }}</td>
            <td class="p-4">
              {{ badge.statusBadge(submission.status) }}
            </td>
            <td class="p-4">
              <div class="flex gap-2 flex-wrap">
                <a
                  href="{{ submission.demoUrl }}"
                  target="_blank"
                  rel="noopener"
                  class="px-3 py-1 border border-black text-xs hover:bg-black hover:text-white transition-colors"
                >
                  View Demo
                </a>
                {% if submission.status == 'pending' %}
                <button class="px-3 py-1 bg-green-600 text-white text-xs hover:bg-green-700 transition-colors">
                  Approve
                </button>
                <button class="px-3 py-1 bg-red-600 text-white text-xs hover:bg-red-700 transition-colors">
                  Reject
                </button>
                {% endif %}
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="p-12 text-center text-neutral-400 border-2 border-black">
      <p class="text-4xl mb-4">ðŸ“­</p>
      <p>No submissions in this category</p>
    </div>
    {% endif %}
  </div>
  {% endfor %}

  {# Quick Stats #}
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-8">
    {% set stats = [
      { label: 'Total Submissions', value: submissions | length },
      { label: 'Pending Review', value: submissions | filterByStatus('pending') | length },
      { label: 'Published', value: designStyles.styles | length },
      { label: 'This Week', value: '2' }
    ] %}
    {% for stat in stats %}
    <div class="bg-neutral-100 p-6">
      <span class="text-3xl font-bold block">{{ stat.value }}</span>
      <span class="text-sm text-neutral-500">{{ stat.label }}</span>
    </div>
    {% endfor %}
  </div>
</div>

<script>
  // Tab switching
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabContents = document.querySelectorAll('.tab-content');

  tabButtons.forEach(button => {
    button.addEventListener('click', () => {
      const tabKey = button.dataset.tab;

      // Update button styles
      tabButtons.forEach(btn => {
        if (btn.dataset.tab === tabKey) {
          btn.classList.add('border-black', 'bg-black', 'text-white');
          btn.classList.remove('border-transparent', 'hover:bg-neutral-100');
        } else {
          btn.classList.remove('border-black', 'bg-black', 'text-white');
          btn.classList.add('border-transparent', 'hover:bg-neutral-100');
        }
      });

      // Show/hide content
      tabContents.forEach(content => {
        if (content.dataset.tabContent === tabKey) {
          content.classList.remove('hidden');
        } else {
          content.classList.add('hidden');
        }
      });
    });
  });
</script>
